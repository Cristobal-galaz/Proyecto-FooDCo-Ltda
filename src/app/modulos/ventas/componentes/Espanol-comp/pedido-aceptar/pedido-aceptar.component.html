<div class="botones-container">Filtros estado orden
  <button 
    class="btn btn-todas" 
    [class.active-button]="esActivo('todas')" 
    (click)="mostrarTodas()">Todas</button>
  <button 
    class="btn btn-pendientes" 
    [class.active-button]="esActivo('pendientes')" 
    (click)="filtrarPendientes()">Pendiente</button>
  <button 
    class="btn btn-aprobadas" 
    [class.active-button]="esActivo('aprobadas')" 
    (click)="filtrarAprobadas()">Aprobado</button>
  <button 
    class="btn btn-rechazadas" 
    [class.active-button]="esActivo('rechazadas')" 
    (click)="filtrarRechazadas()">Rechazado</button>
  <button 
    class="btn btn-modificar-estado" 
    [class.active-button]="esActivo('modificarEstado')" 
    (click)="mostrarFormulario()">Modificar Estado de una Orden</button>
  <button 
    class="btn btn-modificar-cuotas" 
    [class.active-button]="esActivo('modificarCuotas')" 
    (click)="mostrarFormularioCuotas()">Modificar Cuotas</button>
</div>



<div *ngIf="mostrarSeccionModificar">
  <h3>Actualizar estado de una orden</h3>
  <form (ngSubmit)="actualizarEstadoOrden()">
    <label for="ordenId">ID de la Orden:</label>
    <input type="text" id="ordenId" [(ngModel)]="ordenId" name="ordenId" required />

    <label for="nuevoEstado">Nuevo Estado:</label>
    <select id="nuevoEstado" [(ngModel)]="nuevoEstado" name="nuevoEstado">
      <option value="pendiente">Pendiente</option>
      <option value="aprobado">Aprobado</option>
      <option value="rechazado">Rechazado</option>
      <option value="en_produccion">En Producción</option>
      <option value="listo_para_despachar">Listo para Despachar</option>
      <option value="despachado">Despachado</option>
      <option value="entregado">Entregado</option>
      <option value="completado">Completado</option>
    </select>

    <button class="actualizar" type="submit">Actualizar Estado</button>
    <button class="cancelar" type="button" (click)="cerrarFormulario()">Cancelar</button>
  </form>
</div>

<!-- Formulario para editar las cuotas -->
<div *ngIf="mostrarSeccionCuotas">
  <h3>Actualizar Cuotas de una Orden</h3>
  <form (ngSubmit)="actualizarCuotas()">
    <label for="ordenIdCuotas">ID de la Orden:</label>
    <input type="text" id="ordenIdCuotas" [(ngModel)]="ordenIdCuotas" name="ordenIdCuotas" required />

    <label for="numeroDeCuotas">Número de Cuotas:</label>
    <input type="number" id="numeroDeCuotas" [(ngModel)]="numeroDeCuotas" name="numeroDeCuotas" min="1" required />

    <button class="actualizar" type="submit">Actualizar Cuotas</button>
    <button class="cancelar" type="button" (click)="cerrarFormularioCuotas()">Cancelar</button>
  </form>
</div>
<h1>Ordenes</h1>
<div *ngFor="let orden of ordenesFiltradas">
  <!-- Botón para alternar la visibilidad -->
  <button class="pedido" (click)="toggleVisibility(orden)">
    Orden ID: {{ orden._id }}
  </button>

  <!-- Contenido controlado por orden.isVisible -->
  <div *ngIf="orden.isVisible">
    <h4>Orden ID: {{ orden._id }}</h4>
    <p>Estado: {{ orden.estado }}</p>
    <p>Precio Total: {{ orden.precioTotalOrden }}</p>
    <h5>Productos:</h5>
    <ul>
      <li *ngFor="let producto of orden.seleccionProductos?.productos || []">
        <p>Producto: {{ producto?.producto?.nombre || 'Sin nombre' }}</p>
        <p>Cantidad: {{ producto?.cantidad || 0 }}</p>
        <p>Precio Unitario: {{ producto?.precioUnitario || 0 }}</p>
        <p>Total: {{ producto?.precioTotal || 0 }}</p>
      </li>
    </ul>
  </div>
</div>

